$OpenBSD: patch-tests_libebook-contacts_test-query_c,v 1.2 2013/04/14 16:21:20 ajacoutot Exp $

XXX fix and push upstream

--- tests/libebook-contacts/test-query.c.orig	Sun Apr 14 16:32:35 2013
+++ tests/libebook-contacts/test-query.c	Sun Apr 14 18:05:44 2013
@@ -37,7 +37,9 @@ test_query (gconstpointer data)
 	EBookQuery *query;
 	gchar *sexp;
 
+#if 0
 	setlocale (LC_ADDRESS, test->locale);
+#endif
 	sexp = e_book_query_to_string (test->query);
 	normalize_space (sexp);
 
@@ -74,7 +76,9 @@ add_query_test (const gchar *path,
 {
 	TestData *data = g_slice_new (TestData);
 
+#if 0
 	data->locale = g_strdup (setlocale (LC_ADDRESS, NULL));
+#endif
 	data->sexp = g_strdup (sexp);
 	data->query = query;
 
@@ -90,7 +94,9 @@ main (gint argc,
 	g_test_init (&argc, &argv, NULL);
 	g_test_bug_base ("http://bugzilla.gnome.org/");
 
+#if 0
 	setlocale (LC_ADDRESS, "en_US.UTF-8");
+#endif
 
 	add_query_test (
 		"/libebook/test-query/sexp/all",
@@ -187,7 +193,9 @@ main (gint argc,
 		" (eqphone_short \"phone\" \"5423789\" \"en_US.UTF-8\")"
 		" )");
 
+#if 0
 	setlocale (LC_ADDRESS, "en_GB.UTF-8");
+#endif
 
 	add_query_test (
 		"/libebook/test-query/sexp/eqphone/gb",
