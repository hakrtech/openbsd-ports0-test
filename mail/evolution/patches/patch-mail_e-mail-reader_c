$OpenBSD: patch-mail_e-mail-reader_c,v 1.3 2014/04/08 15:23:15 ajacoutot Exp $

From afe39b84353ed091828fe704cf127a21f492b415 Mon Sep 17 00:00:00 2001
From: Milan Crha <mcrha@redhat.com>
Date: Wed, 26 Mar 2014 16:48:03 +0100
Subject: Fix two memory leaks

--- mail/e-mail-reader.c.orig	Fri Mar  7 19:15:31 2014
+++ mail/e-mail-reader.c	Tue Apr  8 16:38:00 2014
@@ -868,20 +868,16 @@ action_mail_move_cb (GtkAction *action,
 	g_free (default_xfer_messages_uri);
 	default_xfer_messages_uri = g_strdup (uri);
 
-	if (uri != NULL) {
+	if (uri != NULL)
 		mail_transfer_messages (
 			session, folder, uids,
 			TRUE, uri, 0, NULL, NULL);
-		uids = NULL;
-	}
 
 exit:
-	if (uids != NULL)
-		g_ptr_array_unref (uids);
-
 	gtk_widget_destroy (dialog);
 
 	g_clear_object (&folder);
+	g_ptr_array_unref (uids);
 }
 
 static void
