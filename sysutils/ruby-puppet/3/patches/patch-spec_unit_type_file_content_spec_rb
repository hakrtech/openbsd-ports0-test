$OpenBSD: patch-spec_unit_type_file_content_spec_rb,v 1.1 2013/11/25 15:56:23 ajacoutot Exp $

From 40c67e2cd21c36b34948571c59ebd999c5c4cf21 Mon Sep 17 00:00:00 2001
From: "Dustin J. Mitchell" <dustin@mozilla.com>
Date: Fri, 9 Aug 2013 16:05:40 -0400
Subject: [PATCH 1/2] (#22129) force explicit file content to be treated as a bytestring

--- spec/unit/type/file/content_spec.rb.orig	Mon Nov 25 15:52:36 2013
+++ spec/unit/type/file/content_spec.rb	Mon Nov 25 15:52:36 2013
@@ -85,13 +85,11 @@ describe content do
       @content.should.must == string
     end
 
-    if "".respond_to? :encode then
-      it "should convert the value to ASCII-8BIT" do
-        @content = content.new(:resource => @resource)
-        @content.should= "Let's make a \u{2603}"
+    it "should convert the value to ASCII-8BIT", :if => "".respond_to?(:encode) do
+      @content = content.new(:resource => @resource)
+      @content.should= "Let's make a \u{2603}"
 
-        @content.actual_content.should == "Let's make a \xE2\x98\x83"
-      end
+      @content.actual_content.should == "Let's make a \xE2\x98\x83"
     end
   end
 
