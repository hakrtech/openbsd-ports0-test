$OpenBSD: patch-lib_puppet_type_service_rb,v 1.3 2014/08/15 13:29:10 jasper Exp $

https://github.com/puppetlabs/puppet/pull/2978

--- lib/puppet/type/service.rb.orig	Mon Jun  9 23:08:19 2014
+++ lib/puppet/type/service.rb	Fri Aug 15 15:28:38 2014
@@ -80,6 +80,9 @@ module Puppet
       end
 
       newvalue(:running, :event => :service_started, :invalidate_refreshes => true) do
+        # Ensure flags are written out before starting the service as it may
+        # need to read it's flags from the filesystem.
+        @resource.flush if @resource.provider.flaggable?
         provider.start
       end
 
