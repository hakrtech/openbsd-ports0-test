$OpenBSD: patch-lib_src_facts_bsd_filesystem_resolver_cc,v 1.2 2015/07/13 19:03:19 jasper Exp $

- Filter out unsupported fields.
- https://github.com/puppetlabs/facter/pull/1035

--- lib/src/facts/bsd/filesystem_resolver.cc.orig	Fri Jul 10 22:43:04 2015
+++ lib/src/facts/bsd/filesystem_resolver.cc	Fri Jul 10 22:46:29 2015
@@ -50,23 +50,28 @@ namespace facter { namespace facts { namespace bsd {
     vector<string> filesystem_resolver::to_options(struct statfs const& fs)
     {
         static vector<tuple<unsigned int, string>> const flags = {
-            { MNT_RDONLY,       "readonly" },
-            { MNT_SYNCHRONOUS,  "noasync" },
-            { MNT_NOEXEC,       "noexec" },
-            { MNT_NOSUID,       "nosuid" },
-            { MNT_UNION,        "union" },
-            { MNT_ASYNC,        "async" },
-            { MNT_EXPORTED,     "exported" },
-            { MNT_LOCAL,        "local" },
-            { MNT_QUOTA,        "quota" },
-            { MNT_ROOTFS,       "root" },
-#ifndef __FreeBSD__
+            make_tuple<unsigned int, string>(MNT_RDONLY,       "readonly" ),
+            make_tuple<unsigned int, string>(MNT_SYNCHRONOUS,  "noasync" ),
+            make_tuple<unsigned int, string>(MNT_NOEXEC,       "noexec" ),
+            make_tuple<unsigned int, string>(MNT_NOSUID,       "nosuid" ),
+#ifndef __OpenBSD__
+            make_tuple<unsigned int, string>(MNT_UNION,        "union" ),
+#endif /* __OpenBSD__ */
+            make_tuple<unsigned int, string>(MNT_ASYNC,        "async" ),
+            make_tuple<unsigned int, string>(MNT_EXPORTED,     "exported" ),
+            make_tuple<unsigned int, string>(MNT_LOCAL,        "local" ),
+            make_tuple<unsigned int, string>(MNT_QUOTA,        "quota" ),
+            make_tuple<unsigned int, string>(MNT_ROOTFS,       "root" ),
+#if !defined(__FreeBSD__) || defined(__OpenBSD__)
             // the following constants aren't defined on FreeBSD 10
-            { MNT_NODEV,        "nodev" },
-            { MNT_DONTBROWSE,   "nobrowse" },
-            { MNT_AUTOMOUNTED,  "automounted" },
-            { MNT_JOURNALED,    "journaled" },
-            { MNT_DEFWRITE,     "deferwrites" },
+#ifdef __OpenBSD__
+            make_tuple<unsigned int, string>(MNT_NODEV,        "nodev" ),
+#else
+            make_tuple<unsigned int, string>(MNT_DONTBROWSE,   "nobrowse" ),
+            make_tuple<unsigned int, string>(MNT_AUTOMOUNTED,  "automounted" ),
+            make_tuple<unsigned int, string>(MNT_JOURNALED,    "journaled" ),
+            make_tuple<unsigned int, string>(MNT_DEFWRITE,     "deferwrites" ),
+#endif
 #endif
         };
 
