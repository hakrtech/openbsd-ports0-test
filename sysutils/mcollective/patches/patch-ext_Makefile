$OpenBSD: patch-ext_Makefile,v 1.3 2013/03/13 13:33:51 jasper Exp $
--- ext/Makefile.orig	Thu Jan 10 18:43:11 2013
+++ ext/Makefile	Wed Feb  6 20:21:20 2013
@@ -1,7 +1,5 @@
 #!/usr/bin/make -f
 
-DESTDIR=
-
 build:
 
 clean:
@@ -9,36 +7,35 @@ clean:
 install: install-bin install-lib install-conf install-plugins install-doc
 
 install-bin:
-	install -d $(DESTDIR)/usr/sbin
-	install -d $(DESTDIR)/usr/bin
-	cp bin/mc-* $(DESTDIR)/usr/sbin
-	cp bin/mco $(DESTDIR)/usr/bin
-	cp bin/mcollectived $(DESTDIR)/usr/sbin/mcollectived
+	cp bin/mc-* $(PREFIX)/sbin
+	cp bin/mco $(PREFIX)/bin
+	cp bin/mcollectived $(PREFIX)/sbin/mcollectived
 
 install-lib:
-	install -d $(DESTDIR)/usr/lib/ruby/1.8/
-	cp -a lib/* $(DESTDIR)/usr/lib/ruby/1.8/
+	install -d $(PREFIX)/lib/ruby/1.8/
+	cp -R lib/* $(PREFIX)/lib/ruby/1.8/
 
 install-conf:
-	install -d $(DESTDIR)/etc/mcollective/
-	install -d $(DESTDIR)/etc/init.d
-	cp -r etc/* $(DESTDIR)/etc/mcollective/
-	cp mcollective.init $(DESTDIR)/etc/init.d/mcollective
-	rm $(DESTDIR)/etc/mcollective/ssl/PLACEHOLDER
-	rm $(DESTDIR)/etc/mcollective/ssl/clients/PLACEHOLDER
+	install -d $(PREFIX)/share/examples/mcollective/
+	install -d $(PREFIX)/share/examples/mcollective/plugin.d
+	install -d $(PREFIX)/share/examples/mcollective/ssl/clients
+	cp etc/client.cfg.dist $(PREFIX)/share/examples/mcollective/client.cfg
+	cp etc/server.cfg.dist $(PREFIX)/share/examples/mcollective/server.cfg
+	cp etc/facts.yaml.dist $(PREFIX)/share/examples/mcollective/facts.yaml
+	cp etc/rpc-help.erb $(PREFIX)/share/examples/mcollective
 
 install-plugins:
-	install -d $(DESTDIR)/usr/share/mcollective/
-	cp -a plugins $(DESTDIR)/usr/share/mcollective/
+	install -d $(PREFIX)/share/mcollective/
+	cp -R plugins $(PREFIX)/share/mcollective/
 
 install-doc:
-	install -d $(DESTDIR)/usr/share/doc/
-	cp -a doc  $(DESTDIR)/usr/share/doc/mcollective
+	install -d $(PREFIX)/share/doc/
+	cp -R doc  $(PREFIX)/share/doc/mcollective
 
 uninstall:
-	rm -f $(DESTDIR)/usr/sbin/mcollectived
-	rm -rf $(DESTDIR)/usr/lib/ruby/1.8/mcollective*
-	rm -rf $(DESTDIR)/usr/share/mcollective
-	rm -rf $(DESTDIR)/etc/mcollective
+	rm -f $(PREFIX)/usr/sbin/mcollectived
+	rm -rf $(PREFIX)/usr/lib/ruby/1.8/mcollective*
+	rm -rf $(PREFIX)/usr/share/mcollective
+	rm -rf $(PREFIX)/etc/mcollective
 
 .PHONY: build clean install uninstall
