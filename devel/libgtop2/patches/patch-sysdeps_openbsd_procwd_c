$OpenBSD: patch-sysdeps_openbsd_procwd_c,v 1.1 2014/01/23 14:06:34 ajacoutot Exp $

From ecbfade5287c1a0a8973d5f18acb4b08f203f4fb Mon Sep 17 00:00:00 2001
From: Antoine Jacoutot <ajacoutot@gnome.org>
Date: Thu, 23 Jan 2014 14:03:36 +0000
Subject: openbsd: really drop all lsof related code

--- sysdeps/openbsd/procwd.c.orig	Thu Jan 23 14:11:05 2014
+++ sysdeps/openbsd/procwd.c	Thu Jan 23 14:11:24 2014
@@ -96,29 +96,6 @@ parse_output(const char *output, glibtop_proc_wd *buf)
 char**
 glibtop_get_proc_wd_s(glibtop *server, glibtop_proc_wd *buf, pid_t pid)
 {
-	char path[MAXPATHLEN];
-	char *output;
-
-	memset (buf, 0, sizeof (glibtop_proc_wd));
-
-	g_snprintf(path, sizeof(path), "/proc/%u/file", pid);
-	if (safe_readlink(path, buf->exe, sizeof(buf->exe)))
-		buf->flags |= (1 << GLIBTOP_PROC_WD_EXE);
-
-	output = execute_lsof(pid);
-	if (output != NULL) {
-		GPtrArray *dirs;
-
-		dirs = parse_output(output, buf);
-		g_free(output);
-
-		buf->number = dirs->len;
-		buf->flags |= (1 << GLIBTOP_PROC_WD_NUMBER);
-
-		g_ptr_array_add(dirs, NULL);
-
-		return (char **)g_ptr_array_free(dirs, FALSE);
-	}
-
+	/* TODO */
 	return NULL;
 }
