$OpenBSD: patch-sysdeps_openbsd_prockernel_c,v 1.1 2012/01/09 16:45:20 robert Exp $
--- sysdeps/openbsd/prockernel.c.orig	Mon Jan  9 09:26:48 2012
+++ sysdeps/openbsd/prockernel.c	Mon Jan  9 09:31:58 2012
@@ -57,7 +57,7 @@ glibtop_get_proc_kernel_p (glibtop *server,
 			   glibtop_proc_kernel *buf,
 			   pid_t pid)
 {
-	struct kinfo_proc2 *pinfo;
+	struct kinfo_proc *pinfo;
 	int count;
 
 	glibtop_init_p (server, (1L << GLIBTOP_SYSDEPS_PROC_KERNEL), 0);
@@ -71,10 +71,10 @@ glibtop_get_proc_kernel_p (glibtop *server,
 	if (pid == 0) return;
 
 	/* Get the process information */
-	pinfo = kvm_getproc2 (server->machine.kd, KERN_PROC_PID, pid,
+	pinfo = kvm_getprocs (server->machine.kd, KERN_PROC_PID, pid,
 			      sizeof(*pinfo), &count);
 	if ((pinfo == NULL) || (count != 1)) {
-		glibtop_warn_io_r (server, "kvm_getprocs (%d)", pid);
+		glibtop_warn_io_r (server, "kvm_getprocss (%d)", pid);
 		return;
 	}
 
