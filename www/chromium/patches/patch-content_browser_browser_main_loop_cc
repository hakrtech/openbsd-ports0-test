$OpenBSD: patch-content_browser_browser_main_loop_cc,v 1.9 2013/03/27 20:26:42 ajacoutot Exp $

rm g_type_init: fix build with glib2>=2.36.0

--- content/browser/browser_main_loop.cc.orig	Tue Mar 12 20:01:28 2013
+++ content/browser/browser_main_loop.cc	Wed Mar 27 21:24:16 2013
@@ -81,7 +81,7 @@
 #include "ui/gfx/gtk_util.h"
 #endif
 
-#if defined(OS_POSIX) && !defined(OS_MACOSX)
+#if defined(OS_POSIX) && !defined(OS_MACOSX) && !defined(OS_BSD)
 #include <sys/stat.h>
 
 #include "base/process_util.h"
@@ -101,7 +101,7 @@
 namespace content {
 namespace {
 
-#if defined(OS_POSIX) && !defined(OS_MACOSX) && !defined(OS_ANDROID)
+#if defined(OS_POSIX) && !defined(OS_MACOSX) && !defined(OS_ANDROID) && !defined(OS_BSD)
 void SetupSandbox(const CommandLine& parsed_command_line) {
   // TODO(evanm): move this into SandboxWrapper; I'm just trying to move this
   // code en masse out of chrome_main for now.
@@ -293,7 +293,7 @@ void BrowserMainLoop::EarlyInitialization() {
   }
 #endif  // !defined(USE_OPENSSL)
 
-#if defined(OS_POSIX) && !defined(OS_MACOSX) && !defined(OS_ANDROID)
+#if defined(OS_POSIX) && !defined(OS_MACOSX) && !defined(OS_ANDROID) && !defined(OS_BSD)
   SetupSandbox(parsed_command_line_);
 #endif
 
@@ -710,7 +710,6 @@ void BrowserMainLoop::InitializeToolkit() {
   // this is superfluous as gtk_init() ought to do this. It's
   // definitely harmless, so retained as a reminder of this
   // requirement for gconf.
-  g_type_init();
 
 #if !defined(USE_AURA)
   gfx::GtkInitFromCommandLine(parsed_command_line_);
