$OpenBSD: patch-configure_ac,v 1.3 2012/12/11 18:22:54 sthen Exp $
--- configure.ac.orig	Sun Dec  2 09:24:01 2012
+++ configure.ac	Mon Dec 10 21:10:46 2012
@@ -569,6 +569,16 @@ for module in $squid_disk_module_candidates none; do
               if test "x$GCC" = "xyes" -a "x$PRESET_LDFLAGS" = "x" ; then
                 LDFLAGS="$LDFLAGS -pthread"
               fi
+            fi
+            ;;
+          openbsd)
+            if test `echo "$squid_host_os_version" | tr -d .` -lt 52 ; then
+                AC_MSG_NOTICE(pthread library requires OpenBSD 5.2 or later)
+                squid_opt_use_diskthreads="no"
+            else
+              SQUID_CFLAGS="$SQUID_CFLAGS -D_REENTRANT"
+              SQUID_CXXFLAGS="$SQUID_CXXFLAGS -D_REENTRANT"
+              LDFLAGS="$LDFLAGS -lpthread"
             fi
             ;;
           solaris)
