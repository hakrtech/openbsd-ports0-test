$OpenBSD: patch-src_gui_curses_CMakeLists_txt,v 1.4 2015/10/05 08:46:21 dcoppa Exp $

Fix cyclical dependency error

--- src/gui/curses/CMakeLists.txt.orig	Sun Aug 16 08:27:07 2015
+++ src/gui/curses/CMakeLists.txt	Sun Oct  4 11:26:54 2015
@@ -88,17 +88,13 @@ target_link_libraries(${EXECUTABLE} ${STATIC_LIBS} wee
 # This link is created for compatibility with old versions on /upgrade.
 # It may be removed in future.
 add_custom_command(
-  OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/${EXECUTABLE}-curses${CMAKE_EXECUTABLE_SUFFIX}
+  TARGET ${EXECUTABLE} POST_BUILD
   COMMAND ${CMAKE_COMMAND} -E remove -f "weechat-curses${CMAKE_EXECUTABLE_SUFFIX}"
   COMMAND ${CMAKE_COMMAND} -E create_symlink "weechat${CMAKE_EXECUTABLE_SUFFIX}" "weechat-curses${CMAKE_EXECUTABLE_SUFFIX}"
   DEPENDS ${EXECUTABLE}
   WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
   COMMENT "Creating symbolic link ${EXECUTABLE}-curses${CMAKE_EXECUTABLE_SUFFIX}"
-  )
-add_custom_target(${EXECUTABLE}-curses${CMAKE_EXECUTABLE_SUFFIX} ALL
-  DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/${EXECUTABLE}-curses${CMAKE_EXECUTABLE_SUFFIX}
 )
-add_dependencies(${EXECUTABLE}-curses${CMAKE_EXECUTABLE_SUFFIX} ${EXECUTABLE})
 list(APPEND CMAKE_INSTALL_MANIFEST_FILES "${CMAKE_INSTALL_PREFIX}/bin/weechat-curses${CMAKE_EXECUTABLE_SUFFIX}")
 
 # Install executable and symbolic link
