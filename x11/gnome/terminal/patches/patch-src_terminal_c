$OpenBSD: patch-src_terminal_c,v 1.3 2013/03/29 18:39:35 jasper Exp $
--- src/terminal.c.orig	Fri Mar 29 18:07:11 2013
+++ src/terminal.c	Fri Mar 29 18:07:17 2013
@@ -227,6 +227,7 @@ main (int argc, char **argv)
 
   startup_id = g_getenv ("DESKTOP_STARTUP_ID");
 
+#ifdef get_current_dir_name
   /* We use get_current_dir_name() here instead of getcwd / g_get_current_dir()
    * because we want to use the value from PWD (if it is correct).
    * See bug 502146.
@@ -234,6 +235,9 @@ main (int argc, char **argv)
   cwd = get_current_dir_name ();
   working_directory = g_strdup (cwd);
   free (cwd);
+#else
+  working_directory = g_get_current_dir ();
+#endif
 
   options = terminal_options_parse (working_directory,
                                     startup_id,
