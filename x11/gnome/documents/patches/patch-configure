$OpenBSD: patch-configure,v 1.3 2013/03/30 08:55:43 ajacoutot Exp $

Fix DATADIRNAME: see LOCALBASE/share/aclocal/{glib-gettext.m4,intltool.m4}

From 2c769bbd622fd50f8afbfe07b6c07f436a526b2f Mon Sep 17 00:00:00 2001
From: Cosimo Cecchi <cosimoc@gnome.org>
Date: Wed, 19 Dec 2012 17:10:03 +0000
Subject: build: new tracker API version is 0.16

--- configure.orig	Mon Nov 12 23:28:45 2012
+++ configure	Sat Mar 30 09:18:41 2013
@@ -4736,6 +4736,9 @@ else
 fi
 
     ;;
+    *-*-openbsd*)
+    DATADIRNAME=share
+    ;;
     *)
     DATADIRNAME=lib
     ;;
@@ -19384,7 +19387,7 @@ if test -n "$DOCUMENTS_CFLAGS"; then
                   gobject-introspection-1.0 >= \$GOBJECT_INTROSPECTION_MIN_VERSION
                   gtk+-3.0 >= \$GTK_MIN_VERSION
                   gnome-desktop-3.0
-                  tracker-sparql-0.14 >= \$TRACKER_MIN_VERSION
+                  tracker-sparql-0.16 >= \$TRACKER_MIN_VERSION
                   goa-1.0 >= \$GOA_MIN_VERSION
                   libgdata >= \$GDATA_MIN_VERSION
                   zapojit-0.0 >= \$ZAPOJIT_MIN_VERSION\""; } >&5
@@ -19397,7 +19400,7 @@ if test -n "$DOCUMENTS_CFLAGS"; then
                   gobject-introspection-1.0 >= $GOBJECT_INTROSPECTION_MIN_VERSION
                   gtk+-3.0 >= $GTK_MIN_VERSION
                   gnome-desktop-3.0
-                  tracker-sparql-0.14 >= $TRACKER_MIN_VERSION
+                  tracker-sparql-0.16 >= $TRACKER_MIN_VERSION
                   goa-1.0 >= $GOA_MIN_VERSION
                   libgdata >= $GDATA_MIN_VERSION
                   zapojit-0.0 >= $ZAPOJIT_MIN_VERSION") 2>&5
@@ -19413,7 +19416,7 @@ if test -n "$DOCUMENTS_CFLAGS"; then
                   gobject-introspection-1.0 >= $GOBJECT_INTROSPECTION_MIN_VERSION
                   gtk+-3.0 >= $GTK_MIN_VERSION
                   gnome-desktop-3.0
-                  tracker-sparql-0.14 >= $TRACKER_MIN_VERSION
+                  tracker-sparql-0.16 >= $TRACKER_MIN_VERSION
                   goa-1.0 >= $GOA_MIN_VERSION
                   libgdata >= $GDATA_MIN_VERSION
                   zapojit-0.0 >= $ZAPOJIT_MIN_VERSION" 2>/dev/null`
@@ -19437,7 +19440,7 @@ if test -n "$DOCUMENTS_LIBS"; then
                   gobject-introspection-1.0 >= \$GOBJECT_INTROSPECTION_MIN_VERSION
                   gtk+-3.0 >= \$GTK_MIN_VERSION
                   gnome-desktop-3.0
-                  tracker-sparql-0.14 >= \$TRACKER_MIN_VERSION
+                  tracker-sparql-0.16 >= \$TRACKER_MIN_VERSION
                   goa-1.0 >= \$GOA_MIN_VERSION
                   libgdata >= \$GDATA_MIN_VERSION
                   zapojit-0.0 >= \$ZAPOJIT_MIN_VERSION\""; } >&5
@@ -19450,7 +19453,7 @@ if test -n "$DOCUMENTS_LIBS"; then
                   gobject-introspection-1.0 >= $GOBJECT_INTROSPECTION_MIN_VERSION
                   gtk+-3.0 >= $GTK_MIN_VERSION
                   gnome-desktop-3.0
-                  tracker-sparql-0.14 >= $TRACKER_MIN_VERSION
+                  tracker-sparql-0.16 >= $TRACKER_MIN_VERSION
                   goa-1.0 >= $GOA_MIN_VERSION
                   libgdata >= $GDATA_MIN_VERSION
                   zapojit-0.0 >= $ZAPOJIT_MIN_VERSION") 2>&5
@@ -19466,7 +19469,7 @@ if test -n "$DOCUMENTS_LIBS"; then
                   gobject-introspection-1.0 >= $GOBJECT_INTROSPECTION_MIN_VERSION
                   gtk+-3.0 >= $GTK_MIN_VERSION
                   gnome-desktop-3.0
-                  tracker-sparql-0.14 >= $TRACKER_MIN_VERSION
+                  tracker-sparql-0.16 >= $TRACKER_MIN_VERSION
                   goa-1.0 >= $GOA_MIN_VERSION
                   libgdata >= $GDATA_MIN_VERSION
                   zapojit-0.0 >= $ZAPOJIT_MIN_VERSION" 2>/dev/null`
@@ -19499,7 +19502,7 @@ fi
                   gobject-introspection-1.0 >= $GOBJECT_INTROSPECTION_MIN_VERSION
                   gtk+-3.0 >= $GTK_MIN_VERSION
                   gnome-desktop-3.0
-                  tracker-sparql-0.14 >= $TRACKER_MIN_VERSION
+                  tracker-sparql-0.16 >= $TRACKER_MIN_VERSION
                   goa-1.0 >= $GOA_MIN_VERSION
                   libgdata >= $GDATA_MIN_VERSION
                   zapojit-0.0 >= $ZAPOJIT_MIN_VERSION" 2>&1`
@@ -19513,7 +19516,7 @@ fi
                   gobject-introspection-1.0 >= $GOBJECT_INTROSPECTION_MIN_VERSION
                   gtk+-3.0 >= $GTK_MIN_VERSION
                   gnome-desktop-3.0
-                  tracker-sparql-0.14 >= $TRACKER_MIN_VERSION
+                  tracker-sparql-0.16 >= $TRACKER_MIN_VERSION
                   goa-1.0 >= $GOA_MIN_VERSION
                   libgdata >= $GDATA_MIN_VERSION
                   zapojit-0.0 >= $ZAPOJIT_MIN_VERSION" 2>&1`
@@ -19530,7 +19533,7 @@ fi
                   gobject-introspection-1.0 >= $GOBJECT_INTROSPECTION_MIN_VERSION
                   gtk+-3.0 >= $GTK_MIN_VERSION
                   gnome-desktop-3.0
-                  tracker-sparql-0.14 >= $TRACKER_MIN_VERSION
+                  tracker-sparql-0.16 >= $TRACKER_MIN_VERSION
                   goa-1.0 >= $GOA_MIN_VERSION
                   libgdata >= $GDATA_MIN_VERSION
                   zapojit-0.0 >= $ZAPOJIT_MIN_VERSION) were not met:
@@ -19575,13 +19578,13 @@ if test -n "$MINER_CFLAGS"; then
     pkg_cv_MINER_CFLAGS="$MINER_CFLAGS"
  elif test -n "$PKG_CONFIG"; then
     if test -n "$PKG_CONFIG" && \
-    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"tracker-sparql-0.14 >= \$TRACKER_MIN_VERSION
+    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"tracker-sparql-0.16 >= \$TRACKER_MIN_VERSION
                   glib-2.0 >= \$GLIB_MIN_VERSION
                   gio-2.0 >= \$GLIB_MIN_VERSION
                   goa-1.0 >= \$GOA_MIN_VERSION
                   libgdata >= \$GDATA_MIN_VERSION
                   zapojit-0.0 >= \$ZAPOJIT_MIN_VERSION\""; } >&5
-  ($PKG_CONFIG --exists --print-errors "tracker-sparql-0.14 >= $TRACKER_MIN_VERSION
+  ($PKG_CONFIG --exists --print-errors "tracker-sparql-0.16 >= $TRACKER_MIN_VERSION
                   glib-2.0 >= $GLIB_MIN_VERSION
                   gio-2.0 >= $GLIB_MIN_VERSION
                   goa-1.0 >= $GOA_MIN_VERSION
@@ -19590,7 +19593,7 @@ if test -n "$MINER_CFLAGS"; then
   ac_status=$?
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; then
-  pkg_cv_MINER_CFLAGS=`$PKG_CONFIG --cflags "tracker-sparql-0.14 >= $TRACKER_MIN_VERSION
+  pkg_cv_MINER_CFLAGS=`$PKG_CONFIG --cflags "tracker-sparql-0.16 >= $TRACKER_MIN_VERSION
                   glib-2.0 >= $GLIB_MIN_VERSION
                   gio-2.0 >= $GLIB_MIN_VERSION
                   goa-1.0 >= $GOA_MIN_VERSION
@@ -19607,13 +19610,13 @@ if test -n "$MINER_LIBS"; then
     pkg_cv_MINER_LIBS="$MINER_LIBS"
  elif test -n "$PKG_CONFIG"; then
     if test -n "$PKG_CONFIG" && \
-    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"tracker-sparql-0.14 >= \$TRACKER_MIN_VERSION
+    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"tracker-sparql-0.16 >= \$TRACKER_MIN_VERSION
                   glib-2.0 >= \$GLIB_MIN_VERSION
                   gio-2.0 >= \$GLIB_MIN_VERSION
                   goa-1.0 >= \$GOA_MIN_VERSION
                   libgdata >= \$GDATA_MIN_VERSION
                   zapojit-0.0 >= \$ZAPOJIT_MIN_VERSION\""; } >&5
-  ($PKG_CONFIG --exists --print-errors "tracker-sparql-0.14 >= $TRACKER_MIN_VERSION
+  ($PKG_CONFIG --exists --print-errors "tracker-sparql-0.16 >= $TRACKER_MIN_VERSION
                   glib-2.0 >= $GLIB_MIN_VERSION
                   gio-2.0 >= $GLIB_MIN_VERSION
                   goa-1.0 >= $GOA_MIN_VERSION
@@ -19622,7 +19625,7 @@ if test -n "$MINER_LIBS"; then
   ac_status=$?
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; then
-  pkg_cv_MINER_LIBS=`$PKG_CONFIG --libs "tracker-sparql-0.14 >= $TRACKER_MIN_VERSION
+  pkg_cv_MINER_LIBS=`$PKG_CONFIG --libs "tracker-sparql-0.16 >= $TRACKER_MIN_VERSION
                   glib-2.0 >= $GLIB_MIN_VERSION
                   gio-2.0 >= $GLIB_MIN_VERSION
                   goa-1.0 >= $GOA_MIN_VERSION
@@ -19648,14 +19651,14 @@ else
         _pkg_short_errors_supported=no
 fi
         if test $_pkg_short_errors_supported = yes; then
-	        MINER_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors --cflags --libs "tracker-sparql-0.14 >= $TRACKER_MIN_VERSION
+	        MINER_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors --cflags --libs "tracker-sparql-0.16 >= $TRACKER_MIN_VERSION
                   glib-2.0 >= $GLIB_MIN_VERSION
                   gio-2.0 >= $GLIB_MIN_VERSION
                   goa-1.0 >= $GOA_MIN_VERSION
                   libgdata >= $GDATA_MIN_VERSION
                   zapojit-0.0 >= $ZAPOJIT_MIN_VERSION" 2>&1`
         else
-	        MINER_PKG_ERRORS=`$PKG_CONFIG --print-errors --cflags --libs "tracker-sparql-0.14 >= $TRACKER_MIN_VERSION
+	        MINER_PKG_ERRORS=`$PKG_CONFIG --print-errors --cflags --libs "tracker-sparql-0.16 >= $TRACKER_MIN_VERSION
                   glib-2.0 >= $GLIB_MIN_VERSION
                   gio-2.0 >= $GLIB_MIN_VERSION
                   goa-1.0 >= $GOA_MIN_VERSION
@@ -19665,7 +19668,7 @@ fi
 	# Put the nasty error message in config.log where it belongs
 	echo "$MINER_PKG_ERRORS" >&5
 
-	as_fn_error $? "Package requirements (tracker-sparql-0.14 >= $TRACKER_MIN_VERSION
+	as_fn_error $? "Package requirements (tracker-sparql-0.16 >= $TRACKER_MIN_VERSION
                   glib-2.0 >= $GLIB_MIN_VERSION
                   gio-2.0 >= $GLIB_MIN_VERSION
                   goa-1.0 >= $GOA_MIN_VERSION
