$OpenBSD: patch-src_gdict-source-dialog_c,v 1.1 2017/04/11 08:35:53 ajacoutot Exp $

From 1163ed404c64ac2cecf082f2034442a352d69e0f Mon Sep 17 00:00:00 2001
From: Emmanuele Bassi <ebassi@gnome.org>
Date: Mon, 6 Mar 2017 17:54:11 +0000
Subject: Use gtk_show_uri_on_window() with newer GTK+

--- src/gdict-source-dialog.c.orig	Wed Sep 16 20:50:01 2015
+++ src/gdict-source-dialog.c	Tue Apr 11 09:15:41 2017
@@ -443,9 +443,16 @@ on_dialog_response (GtkDialog *dialog,
       break;
 
     case GTK_RESPONSE_HELP:
+#if GTK_CHECK_VERSION (3, 22, 0)
+      gtk_show_uri_on_window (GTK_WINDOW (dialog),
+                              "help:gnome-dictionary/gnome-dictionary-add-source",
+                              gtk_get_current_event_time (), &err);
+#else
       gtk_show_uri (gtk_widget_get_screen (GTK_WIDGET (dialog)),
                     "help:gnome-dictionary/gnome-dictionary-add-source",
                     gtk_get_current_event_time (), &err);
+#endif
+
       if (err)
         {
           gdict_show_gerror_dialog (GTK_WINDOW (dialog),
