$OpenBSD: patch-gkr_seahorse-gkr-actions_c,v 1.2 2012/10/15 06:02:23 ajacoutot Exp $

From 4a297007e5c555ee4efe881cda283bd1c45e8f52 Mon Sep 17 00:00:00 2001
From: Stef Walter <stefw@gnome.org>
Date: Sat, 13 Oct 2012 12:59:57 +0000
Subject: gkr: Fix regression for changing keyring password

--- gkr/seahorse-gkr-actions.c.orig	Tue Aug 21 12:23:15 2012
+++ gkr/seahorse-gkr-actions.c	Sun Oct 14 10:08:51 2012
@@ -240,7 +240,7 @@ on_change_password_prompt (GObject *source,
 
 	retval = g_dbus_connection_call_finish (G_DBUS_CONNECTION (source), result, &error);
 	if (error == NULL) {
-		g_variant_get (retval, "@s", &prompt_path);
+		g_variant_get (retval, "(&o)", &prompt_path);
 		secret_service_prompt_at_dbus_path (change->service, prompt_path, NULL,
 		                                    on_change_password_done, change);
 		g_variant_unref (retval);
@@ -272,7 +272,7 @@ on_keyring_password (GtkAction *action,
 	                        g_dbus_proxy_get_object_path (proxy),
 	                        "org.gnome.keyring.InternalUnsupportedGuiltRiddenInterface",
 	                        "ChangeWithPrompt",
-	                        g_variant_new ("(o)", g_dbus_proxy_get_object_path (proxy)),
+	                        g_variant_new ("(o)", g_dbus_proxy_get_object_path (G_DBUS_PROXY (collection))),
 	                        G_VARIANT_TYPE ("(o)"),
 	                        0, -1, NULL, on_change_password_prompt, change);
 }
