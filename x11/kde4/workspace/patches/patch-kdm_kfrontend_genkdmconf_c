$OpenBSD: patch-kdm_kfrontend_genkdmconf_c,v 1.2 2014/01/28 20:50:40 zhuk Exp $
Deconfict with kdebase-3.x.
--- kdm/kfrontend/genkdmconf.c.orig	Thu Jan  2 23:27:49 2014
+++ kdm/kfrontend/genkdmconf.c	Wed Jan 29 00:17:45 2014
@@ -699,6 +699,11 @@ static const char def_reset[] =
 "#chown root /dev/console\n"
 "#chmod 622 /dev/console\n"
 "\n"
+"# This is an OpenBSD-specific hack until ConsoleKit gets fixed.\n"
+"# OpenBSD does not support multi-seat X sessions now anyway.\n"
+"#\n"
+"pkill -u 0 ${LOCALBASE}/sbin/console-kit-daemon\n"
+"\n"
 "# XDM configurations typically have sessreg here. KDM has it built-in.\n";
 
 static const char def_session1[] =
@@ -771,7 +776,7 @@ static const char def_session2[] =
 "    exec $HOME/.xsession\n"
 "    ;;\n"
 "  default)\n"
-"    exec " KDE_BINDIR "/startkde\n"
+"    exec " KDE_BINDIR "/startkde4\n"
 "    ;;\n"
 "  *)\n"
 "    eval exec \"$session\"\n"
