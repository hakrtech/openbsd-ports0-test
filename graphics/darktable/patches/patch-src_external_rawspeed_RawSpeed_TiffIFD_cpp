$OpenBSD: patch-src_external_rawspeed_RawSpeed_TiffIFD_cpp,v 1.2 2016/10/18 09:40:25 sthen Exp $

From abbc577bf87c211e73f663a78173168faaf8aca3 Mon Sep 17 00:00:00 2001
From: Roman Lebedev <lebedev.ri@gmail.com>
Date: Fri, 14 Oct 2016 21:01:19 +0300
Subject: [PATCH] rawspeed: TiffIFD::parseDngPrivateData(): compare with
 "Adobe\0" via memcmp()

--- src/external/rawspeed/RawSpeed/TiffIFD.cpp.orig	Sat Sep  3 14:11:13 2016
+++ src/external/rawspeed/RawSpeed/TiffIFD.cpp	Tue Oct 18 10:27:08 2016
@@ -118,8 +118,7 @@ TiffIFD* TiffIFD::parseDngPrivateData(TiffEntry *t) {
   */
   uint32 size = t->count;
   const uchar8 *data = t->getData();
-  string id((const char*)data);
-  if (0 != id.compare("Adobe"))
+  if (0 != memcmp(data, "Adobe", 6))
     ThrowTPE("Not Adobe Private data");
 
   data+=6;
