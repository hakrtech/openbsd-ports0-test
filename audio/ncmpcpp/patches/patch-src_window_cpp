$OpenBSD: patch-src_window_cpp,v 1.3 2015/02/23 10:16:48 dcoppa Exp $

commit e5e61842c5bf610da1b4ceeb52e613dd911040b6
Author: Benoit Pierre <benoit.pierre@gmail.com>
Date:   Thu Feb 5 15:05:56 2015 +0100

window: don't add encrypted prompts to input history

--- src/window.cpp.orig	Mon Feb 23 04:06:36 2015
+++ src/window.cpp	Mon Feb 23 04:07:14 2015
@@ -820,7 +820,7 @@ std::string Window::getString(const std::string &base,
 	curs_set(0);
 	if (input != nullptr)
 	{
-		if (input[0] != 0)
+		if (!encrypted && input[0] != 0)
 			add_history(input);
 		result = input;
 		free(input);
